<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –î–Ω–µ–≤–Ω–∏–∫ PRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #2180a0;
            --color-primary-hover: #1a6a86;
            --color-primary-light: rgba(33, 128, 160, 0.1);
            --color-background: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #1a1a1a;
            --color-text-secondary: #666;
            --color-border: #e0e0e0;
            --color-success: #22c55e;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-active: #3b82f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-background);
            color: var(--color-text);
            max-width: 500px;
            margin: 0 auto;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--color-background);
        }

        header {
            background: var(--color-primary);
            color: white;
            padding: 12px 16px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: 18px;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            background: var(--color-surface);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            font-weight: 600;
            cursor: pointer;
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: var(--color-primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .workout-card {
            background: var(--color-surface);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
            user-select: none;
        }

        .exercise-name {
            font-weight: 600;
            font-size: 14px;
            color: var(--color-text);
        }

        .exercise-number {
            background: var(--color-primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .exercise-collapsed .exercise-details {
            display: none;
        }

        .exercise-details {
            display: block;
        }

        .set-row {
            display: grid;
            grid-template-columns: 50px 60px 60px 1fr;
            gap: 8px;
            margin-bottom: 8px;
            align-items: center;
            font-size: 13px;
        }

        .set-label {
            font-weight: 600;
            color: var(--color-text-secondary);
        }

        input[type="number"],
        input[type="text"] {
            padding: 8px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            font-size: 13px;
            font-family: inherit;
        }

        .reps-input,
        .weight-input {
            width: 100%;
        }

        .set-check {
            display: flex;
            gap: 4px;
        }

        .check-box {
            width: 32px;
            height: 32px;
            border: 2px solid var(--color-border);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.2s;
            background: white;
            color: var(--color-text);
        }

        .check-box:hover {
            border-color: var(--color-primary);
        }

        .check-box.done {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .timer-container {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));
            color: white;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            margin: 12px 0;
            box-shadow: 0 4px 12px rgba(33, 128, 160, 0.2);
        }

        .timer-display {
            font-size: 48px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
        }

        .timer-label {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 4px;
            text-transform: uppercase;
        }

        .timer-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            justify-content: center;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn-danger {
            background: var(--color-error);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .progress-section {
            background: var(--color-surface);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .progress-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--color-border);
        }

        .progress-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .progress-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .progress-bar {
            background: var(--color-border);
            border-radius: 4px;
            height: 6px;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--color-success);
            height: 100%;
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: var(--color-primary-light);
            padding: 12px;
            border-radius: 6px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 11px;
            color: var(--color-text-secondary);
            margin-top: 4px;
            text-transform: uppercase;
        }

        .controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .controls button {
            flex: 1;
        }

        .day-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .day-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--color-border);
            background: var(--color-surface);
            color: var(--color-text);
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .day-btn.active {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
        }

        .info-box {
            background: var(--color-primary-light);
            border-left: 4px solid var(--color-primary);
            padding: 12px;
            border-radius: 4px;
            font-size: 12px;
            color: var(--color-text);
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .footer {
            padding: 12px;
            text-align: center;
            font-size: 11px;
            color: var(--color-text-secondary);
            border-top: 1px solid var(--color-border);
            background: var(--color-surface);
        }

        @media (max-width: 400px) {
            .set-row {
                grid-template-columns: 45px 55px 55px 1fr;
                gap: 6px;
            }

            .timer-display {
                font-size: 40px;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 20px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .modal-buttons {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .modal-buttons button {
            flex: 1;
        }

        .sound-on {
            color: var(--color-success);
        }

        .sound-off {
            color: var(--color-error);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –î–Ω–µ–≤–Ω–∏–∫ PRO</header>

        <div class="content">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('today')">–°–µ–≥–æ–¥–Ω—è</button>
                <button class="tab-btn" onclick="switchTab('timer')">‚è±Ô∏è –¢–∞–π–º–µ—Ä</button>
                <button class="tab-btn" onclick="switchTab('progress')">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</button>
                <button class="tab-btn" onclick="switchTab('settings')">‚öôÔ∏è</button>
            </div>

            <!-- TAB: –°–µ–≥–æ–¥–Ω—è -->
            <div id="today" class="tab-content active">
                <div class="day-selector">
                    <button class="day-btn active" onclick="selectWorkoutDay('A')">–î–µ–Ω—å A</button>
                    <button class="day-btn" onclick="selectWorkoutDay('B')">–î–µ–Ω—å B</button>
                </div>

                <div id="workout-list"></div>
            </div>

            <!-- TAB: –¢–∞–π–º–µ—Ä -->
            <div id="timer" class="tab-content">
                <div class="info-box">
                ‚è∞ <strong>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–¥—ã—Ö:</strong> 2-3 –º–∏–Ω—É—Ç—ã –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏ –±–∞–∑–æ–≤—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π, 1,5-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö.
                </div>

                <div class="timer-container">
                    <div class="timer-display" id="timer-display">02:00</div>
                    <div class="timer-label">–º–∏–Ω : —Å–µ–∫</div>
                </div>

                <div class="timer-buttons">
                    <button class="btn btn-primary btn-icon" onclick="timerStart()" id="start-btn">‚ñ∂Ô∏è</button>
                    <button class="btn btn-secondary btn-icon" onclick="timerPause()" id="pause-btn">‚è∏Ô∏è</button>
                    <button class="btn btn-danger btn-icon" onclick="timerReset()">‚èπÔ∏è</button>
                </div>

                <div style="margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <button class="btn btn-primary" onclick="setTimer(120)">2 –º–∏–Ω</button>
                    <button class="btn btn-primary" onclick="setTimer(150)">2:30</button>
                    <button class="btn btn-primary" onclick="setTimer(180)">3 –º–∏–Ω</button>
                    <button class="btn btn-primary" onclick="setTimer(90)">1:30</button>
                </div>

                <div class="info-box" style="margin-top: 20px;">
                üîî –ó–≤—É–∫: <span id="sound-status" class="sound-on">–í–ö–õ</span>
                <button class="btn btn-small" style="float: right; margin-top: -4px;" onclick="toggleSound()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- TAB: –ü—Ä–æ–≥—Ä–µ—Å—Å -->
            <div id="progress" class="tab-content">
                <div class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="week-stat">0</div>
                        <div class="stat-label">–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–∞ –Ω–µ–¥–µ–ª–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sets-stat">0</div>
                        <div class="stat-label">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤</div>
                    </div>
                </div>

                <div class="progress-section">
                    <h3 style="margin-bottom: 16px; font-size: 14px;">–ü—Ä–æ–≥—Ä–µ—Å—Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</h3>
                    <div id="progress-list"></div>
                </div>

                <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" onclick="exportData()">üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                <button class="btn btn-danger" style="width: 100%; margin-top: 8px;" onclick="clearAllData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
            </div>

            <!-- TAB: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="settings" class="tab-content">
                <div class="progress-section">
                    <h3 style="margin-bottom: 16px; font-size: 14px;">‚ÑπÔ∏è –û –ø—Ä–æ–≥—Ä–∞–º–º–µ</h3>
                    <p style="font-size: 13px; line-height: 1.6; color: var(--color-text-secondary);">
                        <strong>–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –î–Ω–µ–≤–Ω–∏–∫ PRO</strong><br><br>
                        –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ñ—É–ª–±–∞–¥–∏ 2√ó/–Ω–µ–¥–µ–ª—é.<br><br>
                        <strong>–§—É–Ω–∫—Ü–∏–∏:</strong><br>
                        ‚úì –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–¥—Ö–æ–¥–æ–≤<br>
                        ‚úì –¢–∞–π–º–µ—Ä –æ—Ç–¥—ã—Ö–∞ –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏<br>
                        ‚úì –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞<br>
                        ‚úì –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö<br><br>
                        <strong>–ü—Ä–∏–Ω—Ü–∏–ø—ã:</strong><br>
                        ‚Ä¢ –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ<br>
                        ‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞–∑ (—Ç–µ—Ö–Ω–∏–∫–∞ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è)<br>
                        ‚Ä¢ –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è: –ø–æ–≤—Ç–æ—Ä—ã ‚Üí –≤–µ—Å<br>
                        ‚Ä¢ –î–Ω–µ–≤–Ω–∏–∫ ‚Äî –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞<br><br>
                        <em>–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</em>
                    </p>
                </div>

                <div class="progress-section">
                    <h3 style="margin-bottom: 12px; font-size: 14px;">üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                    <ul style="font-size: 12px; line-height: 1.8; color: var(--color-text-secondary); margin-left: 16px;">
                        <li><strong>–û—Ç–¥—ã—Ö:</strong> 2-3 –º–∏–Ω—É—Ç—ã –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏ –±–∞–∑–æ–≤—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</li>
                        <li><strong>–î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π:</strong> 8-12 (–Ω–æ–≤–∏—á–∫–∞–º 12-15)</li>
                        <li><strong>–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è:</strong> —Å–Ω–∞—á–∞–ª–∞ —Ä–æ—Å—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤, –ø–æ—Ç–æ–º –≤–µ—Å +2,5-5 –∫–≥</li>
                        <li><strong>–¢–µ—Ö–Ω–∏–∫–∞:</strong> –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±–æ–ª–µ—Ç—å –∏–ª–∏ —Å–∫—Ä–∏–ø–µ—Ç—å</li>
                        <li><strong>–î–Ω–µ–≤–Ω–∏–∫:</strong> –∑–∞–ø–∏—Å—ã–≤–∞–π –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</li>
                    </ul>
                </div>

                <div class="progress-section" style="background: var(--color-primary-light); border: 1px solid var(--color-primary);">
                    <p style="font-size: 12px; color: var(--color-primary); line-height: 1.6;">
                        <strong>–í–µ—Ä—Å–∏—è:</strong> 1.0<br>
                        <strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> —è–Ω–≤–∞—Ä—å 2026<br>
                        <strong>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:</strong> –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π "–ì–æ–¥–∞ –º—ã—à—Ü"
                    </p>
                </div>
            </div>
        </div>

        <div class="footer">
            –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ | –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
        </div>
    </div>

    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-title" id="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
            <p id="modal-message" style="margin-bottom: 12px; font-size: 14px;"></p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-danger" onclick="confirmAction()" id="confirm-btn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // ===== DATA STRUCTURE =====
        const workouts = {
            A: [
                { name: "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–µ –≤—ã–ø–∞–¥—ã (–≥–∞–Ω—Ç–µ–ª–∏)", sets: 3, reps: "10‚Äì12", weight: "8 –∫–≥", unit: "–∫–≥" },
                { name: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è (—Å–≤–æ–∏–º –≤–µ—Å–æ–º)", sets: 3, reps: "6‚Äì9", weight: "‚Äî", unit: "—Ç–µ–ª–æ" },
                { name: "–ñ–∏–º –≤ –∫—Ä–æ—Å—Å–æ–≤–µ—Ä–µ (–≥—Ä—É–¥—å)", sets: 3, reps: "10‚Äì12", weight: "24 –∫–≥/—Ä—É–∫–∞", unit: "–∫–≥" },
                { name: "–ú–∞—Ö–∏ –≥–∞–Ω—Ç–µ–ª—è–º–∏ —Å—Ç–æ—è", sets: 2, reps: "12‚Äì15", weight: "6 –∫–≥", unit: "–∫–≥" },
                { name: "–ë–ª–æ–∫-—Ç—Ä–∏—Ü–µ–ø—Å —Å—Ç–æ—è", sets: 2, reps: "10‚Äì12", weight: "23 –∫–≥", unit: "–∫–≥" },
                { name: "–ü–æ–¥—ä—ë–º –≥–∞–Ω—Ç–µ–ª–µ–π –Ω–∞ –±–∏—Ü–µ–ø—Å", sets: 2, reps: "8‚Äì10", weight: "12 –∫–≥", unit: "–∫–≥" },
                { name: "–ü—Ä–µ—Å—Å –≤ –≤–∏—Å–µ", sets: 2, reps: "12‚Äì15", weight: "‚Äî", unit: "—Ç–µ–ª–æ" }
            ],
            B: [
                { name: "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–µ –≤—ã–ø–∞–¥—ã (–ª—ë–≥–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)", sets: 2, reps: "12‚Äì15", weight: "6‚Äì7 –∫–≥", unit: "–∫–≥" },
                { name: "–¢—è–≥–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –±–ª–æ–∫–∞", sets: 3, reps: "8‚Äì12", weight: "–ø–æ —Å—Ç–∞–Ω–∫—É", unit: "—Å—Ç–∞–Ω–æ–∫" },
                { name: "–ñ–∏–º –≤ –∫—Ä–æ—Å—Å–æ–≤–µ—Ä–µ (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)", sets: 3, reps: "10‚Äì12", weight: "12 –∫–≥", unit: "–∫–≥" },
                { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π —Å–∏–¥—è (–ø–ª–µ—á–∏)", sets: 2, reps: "8‚Äì10", weight: "12 –∫–≥", unit: "–∫–≥" },
                { name: "–ë–ª–æ–∫-—Ç—Ä–∏—Ü–µ–ø—Å —Å—Ç–æ—è", sets: 2, reps: "10‚Äì12", weight: "23 –∫–≥", unit: "–∫–≥" },
                { name: "–ü–æ–¥—ä—ë–º –≥–∞–Ω—Ç–µ–ª–µ–π –Ω–∞ –±–∏—Ü–µ–ø—Å", sets: 2, reps: "8‚Äì10", weight: "12 –∫–≥", unit: "–∫–≥" },
                { name: "–ü—Ä–µ—Å—Å –Ω–∞ –º—è—á–µ/—Ñ–∏—Ç–±–æ–ª–µ", sets: 2, reps: "15‚Äì20", weight: "‚Äî", unit: "—Ç–µ–ª–æ" }
            ]
        };

        let currentDay = 'A';
        let timerInterval = null;
        let timerSeconds = 120;
        let soundEnabled = true;
        let pendingAction = null;

        // ===== STORAGE =====
        function saveData() {
            const data = {
                sessions: JSON.parse(localStorage.getItem('sessions')) || [],
                soundEnabled: soundEnabled
            };
            localStorage.setItem('appData', JSON.stringify(data));
        }

        function loadData() {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [], soundEnabled: true };
            soundEnabled = data.soundEnabled;
            updateSoundStatus();
            return data;
        }

        function saveSession(day, exercises) {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [], soundEnabled: true };
            const today = new Date().toISOString().split('T')[0];
            const existingIndex = data.sessions.findIndex(s => s.date === today && s.day === day);
            
            if (existingIndex >= 0) {
                data.sessions[existingIndex] = { date: today, day, exercises, timestamp: Date.now() };
            } else {
                data.sessions.push({ date: today, day, exercises, timestamp: Date.now() });
            }
            
            localStorage.setItem('appData', JSON.stringify(data));
        }

        // ===== RENDER =====
        function renderWorkouts() {
            const container = document.getElementById('workout-list');
            const exercises = workouts[currentDay];
            
            let html = '<div class="info-box">–†–∞–±–æ—á–∏–π –≤–µ—Å (–ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥), –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å —á—É—Ç—å –ª–µ–≥—á–µ –Ω–∞ 1-2 –ø–æ–≤—Ç–æ—Ä–∞.</div>';
            
            exercises.forEach((ex, idx) => {
                const sets = Array.from({ length: ex.sets }, (_, i) => i + 1);
                html += `
                    <div class="workout-card">
                        <div class="exercise-header" onclick="toggleExercise(this)">
                            <div style="display: flex; gap: 8px; align-items: center; flex: 1;">
                                <div class="exercise-number">${idx + 1}</div>
                                <div>
                                    <div class="exercise-name">${ex.name}</div>
                                    <div style="font-size: 11px; color: var(--color-text-secondary); margin-top: 2px;">${ex.reps} –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π √ó ${ex.weight}</div>
                                </div>
                            </div>
                            <span style="font-size: 20px; color: var(--color-text-secondary);">‚ñº</span>
                        </div>
                        <div class="exercise-details">
                            ${sets.map(setNum => `
                                <div class="set-row">
                                    <div class="set-label">–ü–æ–¥—Ö–æ–¥ ${setNum}</div>
                                    <input type="number" class="reps-input" placeholder="–ü–æ–≤—Ç–æ—Ä–æ–≤" data-ex="${idx}" data-set="${setNum}" min="0" max="50">
                                    <input type="text" class="weight-input" placeholder="–í–µ—Å" data-ex="${idx}" data-set="${setNum}" value="${setNum === 1 ? ex.weight : ''}">
                                    <div class="set-check">
                                        <button class="check-box" onclick="toggleSet(this, ${idx}, ${setNum})">‚úì</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            loadSessionData();
        }

        function toggleExercise(header) {
            header.parentElement.classList.toggle('exercise-collapsed');
            const icon = header.querySelector('span:last-child');
            icon.style.transform = header.parentElement.classList.contains('exercise-collapsed') ? 'rotate(-90deg)' : 'rotate(0deg)';
        }

        function toggleSet(btn, exIdx, setNum) {
            btn.classList.toggle('done');
            saveCurrentSession();
        }

        function saveCurrentSession() {
            const exercises = [];
            document.querySelectorAll('[data-ex]').forEach(input => {
                const exIdx = parseInt(input.dataset.ex);
                const setNum = parseInt(input.dataset.set);
                
                if (!exercises[exIdx]) exercises[exIdx] = [];
                if (!exercises[exIdx][setNum - 1]) exercises[exIdx][setNum - 1] = {};
                
                if (input.classList.contains('reps-input')) {
                    exercises[exIdx][setNum - 1].reps = input.value;
                } else {
                    exercises[exIdx][setNum - 1].weight = input.value;
                }
            });
            
            document.querySelectorAll('.check-box.done').forEach(btn => {
                const card = btn.closest('.workout-card');
                const exIdx = Array.from(document.querySelectorAll('.workout-card')).indexOf(card);
                const setNum = parseInt(btn.parentElement.parentElement.querySelector('.set-label').textContent.match(/\d+/)[0]);
                if (exercises[exIdx]) exercises[exIdx][setNum - 1] = exercises[exIdx][setNum - 1] || {};
                exercises[exIdx][setNum - 1].done = true;
            });
            
            saveSession(currentDay, exercises);
        }

        function loadSessionData() {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [] };
            const today = new Date().toISOString().split('T')[0];
            const session = data.sessions.find(s => s.date === today && s.day === currentDay);
            
            if (session && session.exercises) {
                session.exercises.forEach((ex, exIdx) => {
                    if (ex) {
                        ex.forEach((set, setIdx) => {
                            if (set) {
                                const repsInput = document.querySelector(`[data-ex="${exIdx}"][data-set="${setIdx + 1}"].reps-input`);
                                const weightInput = document.querySelector(`[data-ex="${exIdx}"][data-set="${setIdx + 1}"].weight-input`);
                                const checkBox = document.querySelectorAll('.check-box')[exIdx * 3 + setIdx];
                                
                                if (repsInput && set.reps) repsInput.value = set.reps;
                                if (weightInput && set.weight) weightInput.value = set.weight;
                                if (checkBox && set.done) checkBox.classList.add('done');
                            }
                        });
                    }
                });
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            
            if (tab === 'progress') updateProgress();
        }

        function selectWorkoutDay(day) {
            currentDay = day;
            document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderWorkouts();
        }

        // ===== TIMER =====
        function setTimer(seconds) {
            timerSeconds = seconds;
            updateTimerDisplay();
        }

        function timerStart() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                if (timerSeconds > 0) {
                    timerSeconds--;
                    updateTimerDisplay();
                } else {
                    timerEnd();
                }
            }, 1000);
            document.getElementById('start-btn').disabled = true;
        }

        function timerPause() {
            clearInterval(timerInterval);
            timerInterval = null;
            document.getElementById('start-btn').disabled = false;
        }

        function timerReset() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerSeconds = 120;
            updateTimerDisplay();
            document.getElementById('start-btn').disabled = false;
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            document.getElementById('timer-display').textContent = 
                `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function timerEnd() {
            clearInterval(timerInterval);
            timerInterval = null;
            
            // –í–∏–±—Ä–∞—Ü–∏—è (Android)
            if (navigator.vibrate) {
                navigator.vibrate([200, 100, 200]);
            }
            
            // –ó–≤—É–∫ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–∑—Ä–µ—à—ë–Ω)
            if (soundEnabled) {
                try {
                    playTimerSound();
                } catch (e) {
                    console.log('–ó–≤—É–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∏–±—Ä–∞—Ü–∏—è');
                }
            }
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª
            const timerDisplay = document.getElementById('timer-display');
            timerDisplay.style.color = '#ef4444';
            setTimeout(() => {
                timerDisplay.style.color = 'white';
            }, 300);
            
            document.getElementById('start-btn').disabled = false;
        }

        let audioContext = null;

        function playTimerSound() {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // Resume audio context –µ—Å–ª–∏ –æ–Ω–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ suspended
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                const now = audioContext.currentTime;
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, now);
                oscillator.frequency.setValueAtTime(600, now + 0.1);
                
                gainNode.gain.setValueAtTime(0.15, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                
                oscillator.start(now);
                oscillator.stop(now + 0.3);
            } catch (error) {
                console.log('Web Audio –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
        }

        // ===== PROGRESS =====
        function updateProgress() {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [] };
            const today = new Date();
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            const weekSessions = data.sessions.filter(s => s.date >= weekAgo);
            const completedSets = weekSessions.reduce((sum, s) => {
                return sum + (s.exercises || []).flat().filter(ex => ex && ex.done).length;
            }, 0);
            
            document.getElementById('week-stat').textContent = new Set(weekSessions.map(s => s.date)).size;
            document.getElementById('sets-stat').textContent = completedSets;
            
            renderProgressList();
        }

        function renderProgressList() {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [] };
            const today = new Date();
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            const exerciseProgress = {};
            
            [...workouts.A, ...workouts.B].forEach((ex, idx) => {
                const lastSession = data.sessions
                    .filter(s => s.date >= weekAgo)
                    .reverse()
                    .find(s => s.exercises && s.exercises[idx]);
                
                if (lastSession) {
                    const sets = lastSession.exercises[idx];
                    const completedCount = sets.filter(s => s && s.done).length;
                    exerciseProgress[idx] = { name: ex.name, completed: completedCount, total: sets.length };
                }
            });
            
            let html = '';
            Object.values(exerciseProgress).forEach(prog => {
                const percent = (prog.completed / prog.total) * 100;
                html += `
                    <div class="progress-item">
                        <div class="progress-name">${prog.name}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percent}%"></div>
                        </div>
                        <div class="progress-text">${prog.completed}/${prog.total} –ø–æ–¥—Ö–æ–¥–æ–≤</div>
                    </div>
                `;
            });
            
            document.getElementById('progress-list').innerHTML = html || '<p style="text-align: center; color: var(--color-text-secondary); padding: 20px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</p>';
        }

        // ===== UTILS =====
        function toggleSound() {
            soundEnabled = !soundEnabled;
            updateSoundStatus();
            saveData();
        }

        function updateSoundStatus() {
            const status = document.getElementById('sound-status');
            status.textContent = soundEnabled ? '–í–ö–õ' : '–í–´–ö–õ';
            status.className = soundEnabled ? 'sound-on' : 'sound-off';
        }

        function exportData() {
            const data = JSON.parse(localStorage.getItem('appData')) || { sessions: [] };
            const csv = data.sessions.map(s => `${s.date},${s.day},${JSON.stringify(s.exercises)}`).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `training-log-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }

        function clearAllData() {
            document.getElementById('modal-title').textContent = '–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë?';
            document.getElementById('modal-message').textContent = '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –û—Ç–º–µ–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è.';
            document.getElementById('confirmModal').classList.add('active');
            pendingAction = () => {
                localStorage.removeItem('appData');
                location.reload();
            };
        }

        function confirmAction() {
            if (pendingAction) pendingAction();
            closeModal();
        }

        function closeModal() {
            document.getElementById('confirmModal').classList.remove('active');
            pendingAction = null;
        }

        // ===== INIT =====
        loadData();
        renderWorkouts();
        updateTimerDisplay();
    </script>
</body>
</html>
